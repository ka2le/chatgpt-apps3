javascript:(function() {!function(){function e(e,t,n){var o=document.getElementsByTagName("head")[0],l=document.createElement("script");l.type="text/javascript",l.onerror=function(){var e;t&&((e=document.createElement("script")).type="text/javascript",e.src=t,e.onreadystatechange=n,e.onload=n,o.appendChild(e))},l.src=e,l.onreadystatechange=n,l.onload=n,o.appendChild(l)}console.log("GPT MAIN: 1685709578736");var t="http://localhost:3000/chatgpt-apps3/bookmarklets/min/utils.min.js?"+(new Date).getTime(),n="https://ka2le.github.io/chatgpt-apps3/bookmarklets/min/utils.min.js?"+(new Date).getTime();e("https://unpkg.com/preact@latest/dist/preact.umd.js",null,function(){e("https://unpkg.com/htm@latest/dist/htm.umd.js",null,function(){e("https://unpkg.com/preact@latest/hooks/dist/hooks.umd.js",null,function(){window.h=preact.h,window.render=preact.render,window.html=htm.bind(h),window.useState=preactHooks.useState,window.useEffect=preactHooks.useEffect,window.useRef=preactHooks.useRef,e(t,n,function(){window.h,i=window.render,c=window.html,d=window.useState,s=window.useEffect,e={minHeight:"100px"};var i,c,d,s,e,t=function(){const[e,t]=d(!1),[n,o]=d(!1);var[,,]=d(""),l={toggleOverlay:()=>{o(!n)},isOverlayOpen:n,haveRemoved:e,setHaveRemoved:t};const[r,a]=d(!1);return x(f,y,l,r),x(E,w,l,r),s(function(){removeElementsByClass("gpt-enhancer",e,t),v(),addToolWindow(m,i,c),u(),addObserver([function(){v()},function(){u()},function(){moveToolWindow(m,i,c)},function(){a(function(e){return!e})}]),addStyling()},[e]),c``},n="gpt-enhancer-root",o=document.getElementById(n);function l(){var e=document.getElementById("overAllText").value;sendText(e)}function r({id:e,style:t="",value:n="",class:o=""}){return c`
                <textarea id="${e}" style="${t}" class="${o}">
                    ${n}
                </textarea>
            `}function u(){for(var e=document.getElementsByTagName("main")[0].getElementsByTagName("ol"),t=0;t<e.length;t++)for(var n,o,l,r=e[t].getElementsByTagName("li"),a=0;a<r.length;a++)r[a].classList.contains("has-checkbox")||((n=document.createElement("input")).type="checkbox",o=a+1,l=r[a].innerHTML.replace(/<[^>]*>?/gm,""),n.dataset.listText="Option "+o+": "+l,r[a].style.display="flex",r[a].style.alignItems="center",r[a].insertBefore(n,r[a].firstChild),r[a].classList.add("has-checkbox"))}function m(){return c`
                <div 
                    style=${e} 
                    id="toolWindow"
                    class="group gpt-enhancer w-full text-gray-800 dark:text-gray-100 border-b border-black/10 dark:border-gray-900/50 dark:bg-gray-800">
                    <div><h2>toolWindow</h2></div>
                    <${r}
                        id="codeBox"
                        class="flex flex-col w-full py-[10px] flex-grow md:py-4 md:pl-4 relative border border-black/10 bg-white dark:border-gray-900/50 dark:text-white dark:bg-gray-700 rounded-xl shadow-xs dark:shadow-xs"
                        style=""
                    />${Button("RunJS",p)}
                </div>
            `}function a(){insertTextInPrompt(`
When giving the answer, keep this in mind:
Always do comments in the code like /*COMMENT HERE*/ never do // like //COMMENT HERE  
Never use arrow functions =>`)}function g(){var e=Math.floor(20*Math.random())+1;insertTextInPrompt(`Result: ${e+4} (${e+4} Roll + 1 INT +3 Proficiency)`)}function p(){var e=document.getElementById("codeBox").value;console.log(e),runJs(e)}function h(){var e,t,n=Math.floor(20*Math.random())+1,o=function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return console.log(e[t]),e[t].dataset.listText;return""}((o=document.getElementsByTagName("main")[0].getElementsByTagName("ol"),console.log(o),0<o.length?(o=o[o.length-1].getElementsByTagName("input"),console.log(o),o):[]));console.log(o),o=o+` 
Result: ${n+4} (${n+4} Roll + 1 INT +3 Proficiency)`,n=document.getElementById("prompt-textarea"),e=n.value,console.log(e),t=/\[.*?\]/s,console.log(t),console.log(e.match(t)),e.match(t)?n.value=e.replace(t,"["+o+"]"):n.value=e+"["+o+"]"}function v(){document.querySelectorAll("button:not([gpt-enhancer-modified])").forEach(function(e){var t;e.innerText.includes("Copy code")&&(e.setAttribute("gpt-enhancer-modified","true"),t=e.innerText.replace("Copy code","Copy"),e.setAttribute("innerHtml",t),t=document.createElement("div"),i(c`<${RunJsButton} spanElement=${e}/>`,t),addElement(e.parentElement,t,e.nextSibling),t=document.createElement("div"),i(c`<${DownloadSVGButton} spanElement=${e}/>`,t),addElement(e.parentElement,t,e.nextSibling),t=document.createElement("div"),i(c`<${ToggleEditableButton} spanElement=${e}/>`,t),addElement(e.parentElement,t,e.nextSibling))})}function f({isOverlayOpen:e,toggleOverlay:t}){return c`
                <div id="overAll" style=${utilVars.overlayStyle} style="display: ${e?"block":"none"}">
                <${r} id="overAllText"/>
                ${Button("Send Message",l)}
                ${Button("Toggle Overlay",t)}
                <div id="overAllAnswers"></div>
                </div>
            `}function y(){return document.getElementById("gpt-enhancer-root")}function E({toggleOverlay:e}){return c`
        <div 
            id="toolBar" >
            ${Button("Correction",a)}
            ${Button("RollD20",g)}
            ${Button("RollD20_V2",h)}
            ${Button("RunJS",p)}
            ${Button("Toggle Overlay",e)}
            ${Button("SendTest",function(){sendText("Tell me something interesting")})}
            
            </div>
    `}function w(){var e=document.querySelector(".absolute.bottom-0");return e?childElement=e.querySelectorAll("div.text-center")[0]:null}function x(e,t,n,o){const l=useRef(null);s(()=>{l.current=t(),l.current&&(l.current.innerHTML="",i(c`<${e} ${{...n}} />`,l.current))},[n,o]),l}o&&o.remove(),(o=document.createElement("div")).id=n,document.body.appendChild(o),i(c`<${t} />`,o)})})})})}();})();